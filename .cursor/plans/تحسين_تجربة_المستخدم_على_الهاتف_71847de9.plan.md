---
name: تحسين تجربة المستخدم على الهاتف
overview: خطة شاملة لتحسين تجربة المستخدم على الأجهزة المحمولة تشمل تحسين التصميم المتجاوب، التفاعلات اللمسية، الأداء، والواجهة للمساحات الصغيرة
todos:
  - id: mobile-builder-layout
    content: تحويل layout صفحة البناء إلى layout عمودي على الشاشات الصغيرة مع استخدام Sheet/Drawer للمكونات الجانبية
    status: completed
  - id: touch-targets
    content: ضمان أن جميع الأزرار والأهداف القابلة للنقر تكون 44x44px على الأقل مع تحسين المسافات
    status: completed
  - id: public-form-mobile
    content: "تحسين صفحة النماذج العامة للهاتف: حجم الأزرار، حقول الإدخال، والتنقل"
    status: completed
  - id: question-editor-mobile
    content: "تحسين Question Editor للشاشات الصغيرة: حجم الحقول، Select dropdowns، وإضافة/حذف الخيارات"
    status: completed
  - id: navbar-mobile
    content: "تحسين Navigation Bar للهاتف: القائمة المنسدلة، Typography، والمسافات"
    status: completed
  - id: swipe-gestures
    content: إضافة swipe gestures للتنقل بين الأسئلة في النماذج العامة
    status: completed
    dependencies:
      - public-form-mobile
  - id: performance-mobile
    content: "تحسين الأداء على الأجهزة المحمولة: Three.js animation، تحميل الصور، وbundle size"
    status: completed
  - id: mobile-utilities
    content: "إضافة mobile-specific utilities في globals.css: touch targets، safe-area، وresponsive spacing"
    status: completed
  - id: forms-list-mobile
    content: "تحسين صفحة قائمة النماذج للهاتف: عرض البطاقات، البحث، والفلترة"
    status: completed
  - id: accessibility-mobile
    content: "تحسين إمكانية الوصول على الهاتف: keyboard navigation، focus indicators، وscreen readers"
    status: completed
---

# خطة تحسين تجربة المستخدم على الهاتف

## نظرة عامة

تحسين شامل لتجربة المستخدم على الأجهزة المحمولة مع التركيز على التصميم المتجاوب، التفاعلات اللمسية، الأداء، والواجهة للمساحات الصغيرة.

## المجالات الرئيسية للتحسين

### 1. تحسين التصميم المتجاوب (Responsive Design)

#### 1.1 صفحة البناء (Form Builder)

- **الملف**: `src/app/[locale]/(dashboard)/forms/[id]/builder/page.tsx`
- **المشاكل الحالية**:
- التخطيط الثلاثي الأعمدة (sidebar, editor, preview) لا يعمل جيداً على الشاشات الصغيرة
- الأزرار والأدوات صغيرة جداً للتفاعل اللمسي
- شريط الأدوات العلوي مزدحم على الشاشات الصغيرة
- **الحلول**:
- تحويل التخطيط إلى وضع عمودي على الشاشات الصغيرة (stack layout)
- استخدام Sheet/Drawer للمكونات الجانبية على الهاتف
- إضافة وضع "Mobile Preview" لمعاينة النموذج على الشاشة الصغيرة
- تحسين شريط الأدوات العلوي: إخفاء بعض الأزرار أو نقلها إلى قائمة منسدلة
- زيادة حجم الأزرار إلى 44x44px كحد أدنى (معيار Apple/Google)

#### 1.2 صفحة النماذج العامة (Public Form Page)

- **الملف**: `src/app/[locale]/f/[slug]/page.tsx`
- **المشاكل الحالية**:
- أزرار التنقل بين الأسئلة قد تكون صغيرة
- نموذج الإدخال قد لا يكون محسّناً للشاشات الصغيرة
- **الحلول**:
- تحسين حجم أزرار التنقل (Next/Previous)
- إضافة swipe gestures للتنقل بين الأسئلة
- تحسين حجم حقول الإدخال والمسافات بينها
- إضافة keyboard navigation محسّن

#### 1.3 صفحة قائمة النماذج (Forms List)

- **الملف**: `src/app/[locale]/(dashboard)/forms/page.tsx`
- **الحلول**:
- تحسين عرض البطاقات في وضع Grid على الشاشات الصغيرة
- تحسين قائمة البحث والفلترة
- تحسين القوائم المنسدلة (Dropdown Menus) للشاشات الصغيرة

### 2. تحسين التفاعلات اللمسية (Touch Interactions)

#### 2.1 تحسين الأزرار والأهداف القابلة للنقر

- **الملفات**: جميع المكونات
- **الحلول**:
- ضمان أن جميع الأزرار والأهداف القابلة للنقر تكون 44x44px على الأقل
- إضافة `touch-manipulation` class (موجود بالفعل في بعض الأماكن)
- تحسين المسافات بين الأزرار لتقليل الأخطاء
- إضافة visual feedback عند اللمس (active states)

#### 2.2 إضافة Gestures

- **الحلول**:
- Swipe left/right للتنقل بين الأسئلة في النماذج العامة
- Pull-to-refresh في صفحات القوائم
- Swipe to delete في قائمة النماذج
- Pinch to zoom في معاينة النماذج (إن أمكن)

### 3. تحسين الأداء على الأجهزة المحمولة

#### 3.1 تحسين Three.js Animation في Hero

- **الملف**: `src/components/ui/ai-input-hero.tsx`
- **الحلول**:
- تقليل جودة الرسوم المتحركة على الأجهزة المحمولة (موجود جزئياً)
- إضافة خيار لإيقاف الرسوم المتحركة على الأجهزة منخفضة الأداء
- استخدام `will-change` CSS بشكل محسّن
- Lazy loading للرسوم المتحركة

#### 3.2 تحسين تحميل الصور

- **الحلول**:
- استخدام Next.js Image component مع `priority` فقط للصور المهمة
- إضافة lazy loading للصور غير الحرجة
- استخدام formats محسّنة (WebP, AVIF)

#### 3.3 تحسين Bundle Size

- **الحلول**:
- Dynamic imports للمكونات الثقيلة
- Code splitting محسّن
- تحسين استيراد المكتبات (استيراد فقط ما نحتاجه)

### 4. تحسين الواجهة للمساحات الصغيرة

#### 4.1 تحسين Navigation Bar

- **الملف**: `src/components/ui/mini-navbar.tsx`
- **الحلول**:
- تحسين القائمة المنسدلة على الهاتف
- إضافة bottom navigation bar للهاتف (اختياري)
- تحسين وضع القائمة المنسدلة (hamburger menu)

#### 4.2 تحسين Typography

- **الحلول**:
- استخدام `clamp()` للخطوط (موجود جزئياً في globals.css)
- تحسين line-height للقراءة على الشاشات الصغيرة
- تحسين المسافات بين العناصر

#### 4.3 تحسين Spacing و Padding

- **الحلول**:
- استخدام safe-area-inset (موجود جزئياً)
- تحسين padding على الشاشات الصغيرة
- تقليل المسافات الزائدة على الشاشات الصغيرة

### 5. تحسين إمكانية الوصول (Accessibility)

#### 5.1 تحسين Keyboard Navigation

- **الحلول**:
- ضمان أن جميع العناصر القابلة للنقر قابلة للوصول عبر لوحة المفاتيح
- تحسين focus indicators
- إضافة keyboard shortcuts للعمليات الشائعة

#### 5.2 تحسين Screen Readers

- **الحلول**:
- إضافة aria-labels مناسبة
- تحسين semantic HTML
- إضافة announcements للعمليات المهمة

### 6. تحسينات خاصة بصفحة البناء

#### 6.1 Mobile-First Form Builder Layout

- **الملف**: `src/app/[locale]/(dashboard)/forms/[id]/builder/page.tsx`
- **الحلول**:
- تحويل إلى layout عمودي على الشاشات الصغيرة
- استخدام Tabs للتبديل بين Question List و Editor و Preview
- إضافة floating action button للعمليات المهمة
- تحسين Question Editor للشاشات الصغيرة

#### 6.2 تحسين Question Editor

- **الملف**: `src/components/forms/question-editor.tsx`
- **الحلول**:
- تحسين حجم حقول الإدخال
- تحسين Select dropdowns للشاشات الصغيرة
- تحسين إضافة/حذف الخيارات (choices)

### 7. تحسينات خاصة بصفحة النماذج العامة

#### 7.1 تحسين تجربة الإجابة على الأسئلة

- **الملف**: `src/app/[locale]/f/[slug]/page.tsx`
- **الحلول**:
- تحسين حجم حقول الإدخال
- تحسين Radio buttons و Checkboxes للشاشات الصغيرة
- إضافة progress indicator محسّن
- تحسين عرض الأسئلة الطويلة

### 8. تحسينات CSS العامة

#### 8.1 إضافة Mobile-Specific Utilities

- **الملف**: `src/app/globals.css`
- **الحلول**:
- إضافة utilities للشاشات الصغيرة (موجود جزئياً)
- تحسين touch-target utilities
- إضافة utilities للـ safe-area

## الملفات التي تحتاج تعديل

1. `src/app/[locale]/(dashboard)/forms/[id]/builder/page.tsx` - تحسين layout للهاتف
2. `src/components/forms/question-editor.tsx` - تحسين للشاشات الصغيرة
3. `src/app/[locale]/f/[slug]/page.tsx` - تحسين تجربة الإجابة
4. `src/components/ui/mini-navbar.tsx` - تحسين navigation
5. `src/app/globals.css` - إضافة mobile utilities
6. `src/components/ui/ai-input-hero.tsx` - تحسين الأداء
7. `src/app/[locale]/(dashboard)/forms/page.tsx` - تحسين قائمة النماذج

## أولويات التنفيذ

### المرحلة 1 (أولوية عالية)

1. تحسين layout صفحة البناء للهاتف
2. تحسين حجم الأزرار والأهداف القابلة للنقر
3. تحسين صفحة النماذج العامة للهاتف

### المرحلة 2 (أولوية متوسطة)

4. إضافة gestures (swipe navigation)
5. تحسين الأداء على الأجهزة المحمولة
6. تحسين navigation bar

### المرحلة 3 (أولوية منخفضة)

7. إضافة bottom navigation (اختياري)